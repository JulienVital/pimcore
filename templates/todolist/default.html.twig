{% extends 'layout.html.twig' %}

{% set todoList = pimcore_relation("todoList").element %} 

{% block title %}{{todoList.Title}}{% endblock %}
{% block stylesheets %}
    <link rel="stylesheet" href="{{ asset('css/styles.css') }}">
{% endblock %}
{% block content %}
    <H1>{{todoList.Title}}</H1>

    <ul class="todoList">
        {% if editmode %}
            {{ pimcore_relation("todoList") }}
        {% else %}
            {% set taskNotCompleted = 0 %} 

            {% for task in todoList.todoList|filter(task => task.isDone.data == false) %}
                {% set taskNotCompleted = taskNotCompleted + 1 %}
            {% endfor %}
            
            <H2>{{taskNotCompleted}} t√¢ches en cours</H2>

            {% for task in todoList.todoList %}
                {% if task.isDone.data  %}
                <li><input type='checkbox' checked disabled> <label>{{ task.task.data }}</label></li>
                {% else %}
                <li><input type='checkbox' disabled> <label>{{ task.task.data }}</label></li>
                {% endif %}
            {% endfor %}
        {% endif %}
    </ul>
{% endblock %}

